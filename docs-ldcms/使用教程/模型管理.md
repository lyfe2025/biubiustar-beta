# 模型管理

> 模型是LDCMS中用于定义不同类型内容的数据结构，通过模型可以创建各种类型的内容

## 模型概述

### 什么是模型

模型定义了内容的数据结构和字段类型，每个模型都对应一个数据库表。系统预置了常用的模型类型：

- **文章模型**：用于新闻、资讯等文字内容
- **产品模型**：用于产品展示和介绍
- **单页模型**：用于关于我们、联系我们等单页内容
- **下载模型**：用于文件下载管理
- **图片模型**：用于图片展示和相册

### 模型与栏目的关系

- 每个栏目必须选择一个模型
- 一个模型可以被多个栏目使用
- 栏目中的内容结构由模型决定

## 模型字段类型

### 基础字段类型

| 字段类型 | 说明 | 适用场景 |
|----------|------|----------|
| 文本框 | 单行文本输入 | 标题、关键词 |
| 多行文本 | 多行文本输入 | 简介、描述 |
| 富文本编辑器 | 支持格式化的文本编辑 | 文章内容 |
| 单选框 | 单选选项 | 状态选择 |
| 复选框 | 多选选项 | 标签选择 |
| 下拉选择 | 下拉菜单选择 | 分类选择 |
| 单图上传 | 上传单张图片 | 缩略图、封面图 |
| 多图上传 | 上传多张图片 | 产品图片、相册 |
| 文件上传 | 上传文件 | 附件、下载文件 |
| 日期时间 | 日期时间选择 | 发布时间、活动时间 |
| 数字输入 | 数字类型输入 | 价格、数量 |
| 链接地址 | URL地址输入 | 外部链接 |

### 高级字段类型

| 字段类型 | 说明 | 适用场景 |
|----------|------|----------|
| 颜色选择器 | 颜色值选择 | 主题色彩配置 |
| 地图坐标 | 地理位置选择 | 地址定位 |
| 关联模型 | 关联其他模型数据 | 相关产品、相关文章 |
| JSON编辑器 | JSON格式数据编辑 | 复杂数据结构 |
| 代码编辑器 | 代码编辑器 | CSS、JS代码 |

## 创建自定义模型

### 新建模型步骤

1. **基本信息设置**
   - 模型名称：模型的中文名称
   - 模型标识：英文标识，用于程序调用
   - 数据表名：数据库表名，系统自动生成
   - 模型描述：模型的用途说明

2. **模板设置**
   - 列表页模板：内容列表页面模板
   - 详情页模板：内容详情页面模板
   - 搜索页模板：搜索结果页面模板

3. **字段配置**
   - 添加自定义字段
   - 设置字段属性
   - 配置字段验证规则

### 字段属性配置

对于每个字段，可以设置以下属性：

- **字段名称**：显示给用户的名称
- **字段标识**：程序调用的字段名
- **字段类型**：选择合适的字段类型
- **默认值**：字段的默认值
- **是否必填**：是否为必填字段
- **验证规则**：数据验证规则
- **字段提示**：给用户的提示信息
- **显示条件**：字段显示的条件

## 模型模板开发

### 模板文件结构

每个模型需要对应的模板文件：

```
/view/模板目录/
├── list.html          # 列表页模板
├── detail.html        # 详情页模板
├── search.html        # 搜索页模板
└── index.html         # 首页模板
```

### 模板中调用模型字段

```html
<!-- 调用系统字段 -->
<h1>{$content.title}</h1>
<div class="meta">
    <span>发布时间：{$content.create_time|date='Y-m-d'}</span>
    <span>浏览次数：{$content.views}</span>
</div>

<!-- 调用自定义字段 -->
<div class="price">价格：{$content.price}</div>
<div class="gallery">
    {volist name="content.images" id="img"}
    <img src="{$img}" alt="产品图片">
    {/volist}
</div>
```

## 模型数据管理

### 内容添加

在对应栏目中添加内容时，会根据模型字段生成相应的表单：
- 系统自动生成表单界面
- 根据字段类型显示对应的输入控件
- 自动进行数据验证

### 数据导入导出

支持批量数据操作：
- **Excel导入**：批量导入内容数据
- **数据导出**：导出现有数据
- **数据备份**：定期备份重要数据

## 最佳实践

### 模型设计原则

1. **字段精简**：只添加必要的字段
2. **命名规范**：使用有意义的字段名称
3. **类型合适**：选择最适合的字段类型
4. **验证完善**：设置合理的验证规则

### 性能优化

1. **索引优化**：为经常查询的字段添加索引
2. **字段长度**：设置合适的字段长度
3. **数据分页**：大数据量时使用分页
4. **缓存策略**：合理使用缓存机制

### 扩展性考虑

1. **预留字段**：为将来扩展预留一些字段
2. **兼容性**：考虑与其他系统的数据兼容
3. **迁移方案**：制定数据迁移方案
4. **版本控制**：记录模型的版本变化

---
*文档最后更新时间：2024-01-15*