# 留言表单

> 留言表单并不是一个标签，需要用户自定义表单结构
> 表单的字段可在后台"自定义表单管理 > 自定义表单列表 > 表单字段管理"中进行管理
> 下方提供一个使用示例

## 基本表单结构

```html
<form action="{:addon_url('ldcms/diyform/message')}" method="post">
    <input type="text" name="uname" value="" placeholder="姓名（必填）" size="28" />
    <input type="text" name="mobile" value="" placeholder="电话（必填）" size="28" />
    <input type="text" name="captcha" value="" placeholder="验证码" size="28" />
    <img src="{:captcha_src()}" width="100" height="31" onClick="this.src = '{:captcha_src()}?r=' + Math.random();" />
    <textarea name="remark" cols="50" rows="4" tabindex="5"></textarea>
    <!-- csrf -->
    {:token()}
    <input type="submit" tabindex="6" value="提交" />
</form>
```

## 表单说明

| 元素 | 说明 |
|------|------|
| **表单提交地址** | `{:addon_url('ldcms/diyform/message')}` |
| **验证码图片** | `{:captcha_src()}` |
| **CSRF表单令牌** | `{:token()}` |
| **其他表单字段** | 可根据后台自定义字段来填写，对应位置为"自定义表单管理 > 自定义表单列表 > 表单字段管理" |

## 实际应用示例

### 1. 联系我们表单
```html
<div class="contact-form">
    <h3>联系我们</h3>
    <form action="{:addon_url('ldcms/diyform/message')}" method="post" class="contact-form-inner">
        <div class="form-group">
            <label for="uname">姓名 <span class="required">*</span></label>
            <input type="text" id="uname" name="uname" placeholder="请输入您的姓名" required>
        </div>
        
        <div class="form-group">
            <label for="mobile">联系电话 <span class="required">*</span></label>
            <input type="tel" id="mobile" name="mobile" placeholder="请输入您的联系电话" required>
        </div>
        
        <div class="form-group">
            <label for="email">邮箱</label>
            <input type="email" id="email" name="email" placeholder="请输入您的邮箱">
        </div>
        
        <div class="form-group">
            <label for="company">公司名称</label>
            <input type="text" id="company" name="company" placeholder="请输入您的公司名称">
        </div>
        
        <div class="form-group">
            <label for="remark">留言内容 <span class="required">*</span></label>
            <textarea id="remark" name="remark" rows="5" placeholder="请详细描述您的需求..." required></textarea>
        </div>
        
        <div class="form-group captcha-group">
            <label for="captcha">验证码 <span class="required">*</span></label>
            <div class="captcha-wrapper">
                <input type="text" id="captcha" name="captcha" placeholder="请输入验证码" required>
                <img src="{:captcha_src()}" class="captcha-img" onClick="this.src = '{:captcha_src()}?r=' + Math.random();" alt="验证码" title="点击刷新验证码">
            </div>
        </div>
        
        {:token()}
        
        <div class="form-group">
            <button type="submit" class="btn-submit">提交留言</button>
        </div>
    </form>
</div>
```

### 2. 产品咨询表单
```html
<div class="inquiry-form">
    <h4>产品咨询</h4>
    <form action="{:addon_url('ldcms/diyform/message')}" method="post">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <input type="text" name="uname" placeholder="您的姓名" required>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <input type="tel" name="mobile" placeholder="联系电话" required>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <input type="email" name="email" placeholder="邮箱地址">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <select name="product_type">
                        <option value="">选择产品类型</option>
                        <option value="产品A">产品A</option>
                        <option value="产品B">产品B</option>
                        <option value="产品C">产品C</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <textarea name="remark" rows="4" placeholder="请描述您的具体需求..."></textarea>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <input type="text" name="captcha" placeholder="验证码" required>
                </div>
            </div>
            <div class="col-md-6">
                <div class="captcha-container">
                    <img src="{:captcha_src()}" onClick="this.src = '{:captcha_src()}?r=' + Math.random();" alt="验证码">
                </div>
            </div>
        </div>
        
        {:token()}
        
        <button type="submit" class="btn btn-primary btn-block">立即咨询</button>
    </form>
</div>
```

### 3. 简化版快速留言
```html
<div class="quick-message">
    <h5>快速留言</h5>
    <form action="{:addon_url('ldcms/diyform/message')}" method="post" class="quick-form">
        <input type="text" name="uname" placeholder="姓名" required>
        <input type="tel" name="mobile" placeholder="电话" required>
        <textarea name="remark" placeholder="留言内容" rows="3"></textarea>
        
        <div class="captcha-row">
            <input type="text" name="captcha" placeholder="验证码" required>
            <img src="{:captcha_src()}" onClick="this.src = '{:captcha_src()}?r=' + Math.random();">
        </div>
        
        {:token()}
        <button type="submit">提交</button>
    </form>
</div>
```

### 4. 弹窗表单
```html
<!-- 触发按钮 -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#contactModal">
    联系我们
</button>

<!-- 弹窗表单 -->
<div class="modal fade" id="contactModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">联系我们</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="{:addon_url('ldcms/diyform/message')}" method="post" id="modalContactForm">
                    <div class="form-group">
                        <label>姓名 *</label>
                        <input type="text" name="uname" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>联系电话 *</label>
                        <input type="tel" name="mobile" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>邮箱</label>
                        <input type="email" name="email" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>留言内容</label>
                        <textarea name="remark" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-8">
                                <input type="text" name="captcha" class="form-control" placeholder="验证码" required>
                            </div>
                            <div class="col-4">
                                <img src="{:captcha_src()}" class="img-fluid" onClick="this.src = '{:captcha_src()}?r=' + Math.random();">
                            </div>
                        </div>
                    </div>
                    {:token()}
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                <button type="submit" form="modalContactForm" class="btn btn-primary">提交</button>
            </div>
        </div>
    </div>
</div>
```

### 5. Ajax提交表单
```html
<div class="ajax-form">
    <form id="ajaxContactForm" action="{:addon_url('ldcms/diyform/message')}" method="post">
        <div class="form-row">
            <div class="col-md-6">
                <input type="text" name="uname" placeholder="姓名" required>
            </div>
            <div class="col-md-6">
                <input type="tel" name="mobile" placeholder="电话" required>
            </div>
        </div>
        
        <div class="form-group">
            <input type="email" name="email" placeholder="邮箱">
        </div>
        
        <div class="form-group">
            <textarea name="remark" placeholder="留言内容" rows="4"></textarea>
        </div>
        
        <div class="form-row">
            <div class="col-8">
                <input type="text" name="captcha" placeholder="验证码" required>
            </div>
            <div class="col-4">
                <img src="{:captcha_src()}" id="captchaImg" onClick="refreshCaptcha()">
            </div>
        </div>
        
        {:token()}
        
        <button type="submit" class="btn-submit">提交留言</button>
    </form>
</div>

<script>
function refreshCaptcha() {
    document.getElementById('captchaImg').src = '{:captcha_src()}?r=' + Math.random();
}

document.getElementById('ajaxContactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    var formData = new FormData(this);
    
    fetch(this.action, {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.code === 1) {
            alert('提交成功！我们会尽快联系您。');
            this.reset();
            refreshCaptcha();
        } else {
            alert('提交失败：' + data.msg);
            refreshCaptcha();
        }
    })
    .catch(error => {
        alert('提交失败，请稍后重试。');
        refreshCaptcha();
    });
});
</script>
```

## CSS样式参考

```css
/* 基础表单样式 */
.contact-form {
    background: #f9f9f9;
    padding: 30px;
    border-radius: 8px;
    margin: 20px 0;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: #333;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    transition: border-color 0.3s;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
}

.required {
    color: #dc3545;
}

/* 验证码样式 */
.captcha-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
}

.captcha-wrapper input {
    flex: 1;
}

.captcha-img {
    cursor: pointer;
    border: 1px solid #ddd;
    border-radius: 4px;
}

/* 提交按钮样式 */
.btn-submit {
    background: #007bff;
    color: white;
    padding: 12px 30px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
}

.btn-submit:hover {
    background: #0056b3;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .contact-form {
        padding: 20px;
    }
    
    .form-row .col-md-6 {
        margin-bottom: 15px;
    }
}
```

---

*文档最后更新时间：2024-04-03 15:10:08*
*著作权归应用插件开发者所有，未经许可，禁止转载、复制此文档的任何内容。*