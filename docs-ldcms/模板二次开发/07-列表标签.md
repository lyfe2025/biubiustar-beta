# 列表标签

> 获取内容文档的列表，对应后台的内容管理，支持数据分页
> 全局通用（列表页或详情页调用可以不传cid）

## 基本使用方法

```html
{ld:list cid='144' limit='4' flag='top,hot' tags='a,b' condition='`title`="测试"' page='true'}
<a href="{$item.url}" title="{$item.title}">
    <img src="{$item.image}" />
    <!--设置图片默认{$item.image|default='__ADDON__/images/logo-img.jpg'}-->
</a>
<a href="{$item.url}" title="{$item.title}">
    {$item.title}
</a>
<i>{$item.description}</i>
{/ld:list}

<!-- 获取分页 -->
{$pages}

<!-- 按照日期排序 -->
order="show_time desc"
```

## 调用参数

| 参数 | 是否必填 | 说明 |
|------|----------|------|
| cid | 否 与mid 二选一 | 所属栏目的ID |
| mid | 否 与cid 二选一 | 内容的模型 ID `v1.2.0` |
| id | 否 mid与cid 二选一 | 内容id(支持多个id,逗号分隔，列表根据id的顺序排序) `v1.4.3` |
| limit | 否 | 调用数量（不填写默认获取16条） |
| page | 否 | 是否开启分页 `v1.0.5` |
| flag | 否 | 标识 (top,hot,new) 对应后台"网站设置>字典"，调用多个请用","隔开 |
| tags | 否 | 对应文档内容的tags,调用多个请用","隔开 |
| condition | 否 | 自定义sql条件 |
| alias | 否 | 默认为"item",代表循环列表的变量名称。 |
| ext | 否 | 获取扩展表的字段，格式ext='content,test' 获取`content`字段 ，格式 ext='content' `v1.3.5` |
| empty | 否 | 数列为空时显示的数据 |
| key | 否 | 列表循环键名变量,默认为i |
| mod | 否 | 取模值，常用于控制换行，默认为2 |
| order | 否 | 排序方式 `v1.0.6` |
| simple | 否 | 开启简洁分页 |
| is_filter | 否 | 当一个页面使用了`多条件筛选`同时`多次`调用了`list`标签，那么就会造成数据冲突，可以开启此属性解决冲突问题 `v1.4.2` |

> v1.0.5版本 优化list 标签分页逻辑，栏目页下可以不需要传入cid，默认开启分页，传入cid时默认不开启分页。

## 自定义sql条件【condition】

> 1、使用这个属性需要一定的SQL基础，至少需要了解where条件的写法
> 2、字段名首尾务必加上`` ` ``字符
> 3、在使用动态SQL时由于使用拼接SQL，请务必做好参数过滤

### 单个条件
```sql
condition="`title`=测试"
```

### 多个条件
```sql
// 多个条件 其中 AND 表示2个条件同时满足。如果需要同时只满足一个，那么可以使用OR
condition="`title`="测试" AND `visits` > 20"
```

### 动态条件
```php
//传入动态条件需要先将条件赋值给一个变量，然后将变量传入condition中
{php}$condition = "`cid`=".$category['id']." AND `visits` > 20";{/php} condition='$condition'
// $category['id'] 表示当前栏目id
// $content['id'] 表示当前内容id
```

### 解决字段冲突
**如果出现sql错误，有可能是表字段有冲突，请将字段名前加上表名。**

```sql
> 基础表的表名'document' > 扩展表的表名'extend' 
condition='`document`.`title`="测试" AND `extend`.`visits` > 20'
```

## 调用字段

> 默认调用数组为"$item" 例如： {$item.id}
> 如果在嵌套标签里出现变量冲突的情况 可以使用`alias`属性修改别名为'vo', 调用时就是这样{$vo.id}

| 字段 | 说明 |
|------|------|
| `{$i}` | 计数，从1开始 |
| `{$item.url}` | 链接 |
| `{$item.title}` | 标题 |
| `{$item.image}` | 缩略图 |
| `{$item.seo_description}` | 描述 |
| `{$item.visits}` | 浏览次数 |
| `{$item.show_time}` | 发布时间 |
| `{$item.pics}` | 多图 |

> **温馨提示**
> 更多字段请到后台`模型管理`>`字段管理`中进行查看

如需调用分页，则直接在`{ld:list cid='144' limit='4'}{/ld:list}`标签外使用`{$pages}`来获取

## 示例代码

### 根据自定义字段查询
```html
<!-- condition，条件；lxalfw，自定义字段名；extend，固定格式 -->
{ld:list cid='154' condition='`extend`.`lxalfw`=244' }
<div class="swiper-slide">
    <a href="{$item.url}" class="item">
        <div class="content1">
            <img src="{$item.image}" />
        </div>
        <div class="content2">
            <div class="content3">
                {$item.title}
            </div>
            <div class="content4">
            </div>
            <div class="content5">
            </div>
        </div>
    </a>
</div>
{/ld:list}
```

### 调用当前栏目列表
> 列表页中调用

```html
// 可以自动获取cid 
{ld:list }
<a href="{$item.url}">
    {$item.title}
</a>
{/ld:list}
```

### 导航中调用内容列表数据
```html
{ld:nav pid="$topid"}
<div class="inpage-title left">
    <div class="cn">{$item.name}</div>
    <a class="more-btn" href="{$item.url}">更多<i class="arrow"></i></a>
</div>
<ul class="product-info-list clearfix">
    {ld:list cid="$item['id']" limit="8" alias="navlist" }
    <li>
        <a href="{$navlist.url}" title="{$navlist.title}">
            <div class="pic">
                <em style="background-image: url({$navlist.image});"></em>
            </div>
            <div class="info">
                <div class="tit">{$navlist.title}</div>
                <div class="txt">{$navlist.seo_description}</div>
            </div>
        </a>
    </li>
    {/ld:list}
</ul>
{/ld:nav}
```

## 实际应用示例

### 1. 首页新闻列表
```html
<div class="news-section">
    <h2>最新动态</h2>
    {ld:list cid="1" limit="6" flag="top"}
    <div class="news-item">
        <a href="{$item.url}">
            {if $item.image}
            <img src="{$item.image}" alt="{$item.title}">
            {/if}
            <h3>{$item.title}</h3>
            <p class="date">{$item.show_time|date="Y-m-d",###}</p>
            <p class="desc">{$item.seo_description}</p>
        </a>
    </div>
    {/ld:list}
</div>
```

### 2. 产品展示列表
```html
<div class="product-grid">
    {ld:list cid="5" limit="12" page="true"}
    <div class="product-item">
        <a href="{$item.url}">
            <img src="{$item.image|default='__ADDON__/images/default-product.jpg'}" alt="{$item.title}">
            <h4>{$item.title}</h4>
            <p class="price">{$item.price}</p>
        </a>
    </div>
    {/ld:list}
</div>
{$pages}
```

### 3. 相关文章推荐
```html
<div class="related-posts">
    <h3>相关文章</h3>
    {ld:list cid="$category.id" limit="5" condition="`id` != {$content.id}"}
    <div class="related-item">
        <a href="{$item.url}">
            <img src="{$item.image}" alt="{$item.title}">
            <span>{$item.title}</span>
        </a>
    </div>
    {/ld:list}
</div>
```

### 4. 标签聚合页面
```html
<div class="tag-posts">
    {ld:list tags="$tag" limit="20" page="true"}
    <article class="post-item">
        <h2><a href="{$item.url}">{$item.title}</a></h2>
        <div class="meta">
            <span>发布时间：{$item.show_time|date="Y-m-d",###}</span>
            <span>浏览：{$item.visits}次</span>
        </div>
        <div class="excerpt">{$item.seo_description}</div>
    </article>
    {/ld:list}
</div>
{$pages}
```

---

*文档最后更新时间：2025-07-22 19:08:46*
*著作权归应用插件开发者所有，未经许可，禁止转载、复制此文档的任何内容。*